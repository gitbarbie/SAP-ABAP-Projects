
REPORT  Z673873_REPORT2DAY2.

DATA SCR_NUM TYPE SY-DYNNR.
DATA: IT_EMP TYPE STANDARD TABLE OF Z673873_EMP.
DATA WA_EMP TYPE Z673873_EMP.

SELECTION-SCREEN BEGIN OF SCREEN 100.
PARAMETERS P_DEPTID TYPE Z673873_DEPT-DEPTID.
PARAMETERS C_LOC AS CHECKBOX.
SELECTION-SCREEN END OF SCREEN 100.

SELECTION-SCREEN BEGIN OF SCREEN 101.
PARAMETERS P_LOC TYPE Z673873_EMP-LOCATION.
SELECTION-SCREEN END OF SCREEN 101.

INITIALIZATION.
  CALL SCREEN 100.

AT SELECTION-SCREEN.
  SCR_NUM = SY-DYNNR.
  IF C_LOC = 'X' AND SCR_NUM = 100.
    CALL SELECTION-SCREEN 101.
  ENDIF.

START-OF-SELECTION.
  IF SCR_NUM = 100.
    SELECT * FROM Z673873_EMP
      INTO TABLE IT_EMP
      WHERE DEPTID = P_DEPTID.
  ELSEIF SCR_NUM = 101.
    SELECT * FROM Z673873_EMP
      INTO TABLE IT_EMP
      WHERE DEPTID = P_DEPTID AND LOCATION = P_LOC.
  ENDIF.
  IF SY-SUBRC <> 0.
    WRITE: 'NO EMPLOYEES'.
  ENDIF.

END-OF-SELECTION.
  LOOP AT IT_EMP INTO WA_EMP.
    WRITE : / WA_EMP-EMPID,WA_EMP-EMPNAME,WA_EMP-LOCATION.
  ENDLOOP.