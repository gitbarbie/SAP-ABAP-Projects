*&---------------------------------------------------------------------*
*&  Include           MZ93_DEMOF01
*&---------------------------------------------------------------------*
*&---------------------------------------------------------------------*
*&      Form  VAL_CREATE
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
*  -->  p1        text
*  <--  p2        text
*----------------------------------------------------------------------*
form VAL_CREATE .
  DATA V_USERID TYPE Z681797_USER-USERID.
  SELECT SINGLE USERID FROM Z681797_USER INTO V_USERID
    WHERE USERID = Z681797_USER-USERID.
  IF SY-SUBRC = 0.
    MESSAGE 'User ID already present! Enter new Userid.'
    TYPE 'E'.

  ENDIF.
endform.                    " VAL_CREATE
*&---------------------------------------------------------------------*
*&      Form  VAL_CH_DI
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
*  -->  p1        text
*  <--  p2        text
*----------------------------------------------------------------------*
form VAL_CH_DI .
  DATA V_USERID TYPE Z681797_USER-USERID.
  SELECT SINGLE USERID FROM Z681797_USER INTO V_USERID
    WHERE USERID = Z681797_USER-USERID.
  IF SY-SUBRC <> 0.
    MESSAGE 'User ID not present! Enter new Userid.'
    TYPE 'E'.

  ENDIF.
endform.                    " VAL_CH_DI
*&---------------------------------------------------------------------*
*&      Form  VAL_PW
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
*  -->  p1        text
*  <--  p2        text
*----------------------------------------------------------------------*
form VAL_PW .
  TYPES: BEGIN OF TY,
    USERID TYPE Z681797_USER-USERID,
    PASSWORD TYPE Z681797_USER-PASSWORD,
    END OF TY.
  DATA WA_USER TYPE TY.

  SELECT SINGLE USERID PASSWORD FROM Z681797_USER
    INTO WA_USER WHERE USERID = Z681797_USER-USERID
    AND PASSWORD = Z681797_USER-PASSWORD.
  IF SY-subrc = 0.
    MESSAGE 'Password is incorrect!'
    TYPE 'E'.

  ENDIF.
endform.                    " VAL_PW
*&---------------------------------------------------------------------*
*&      Form  INVI_DELETE
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
*  -->  p1        text
*  <--  p2        text
*----------------------------------------------------------------------*
form INVI_DELETE .
  LOOP AT SCREEN.
    IF SCREEN-NAME = 'PB_DELETE'.
      SCREEN-invisible = 1.
      MODIFY SCREEN.
    ENDIF.
  ENDLOOP.
endform.                    " INVI_DELETE
*&---------------------------------------------------------------------*
*&      Form  INVI_SAVE
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
*  -->  p1        text
*  <--  p2        text
*----------------------------------------------------------------------*
form INVI_SAVE .
LOOP AT SCREEN.
    IF SCREEN-NAME = 'PB_SAVE'.
      SCREEN-invisible = 1.
      MODIFY SCREEN.
    ENDIF.
  ENDLOOP.
endform.                    " INVI_SAVE
*&---------------------------------------------------------------------*
*&      Form  SAVE
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
*  -->  p1        text
*  <--  p2        text
*----------------------------------------------------------------------*
form SAVE .
  INSERT Z681797_USER FROM Z681797_USER.
  IF SY-subrc = 0.
    MESSAGE 'DATA SAVED' TYPE 'S'.

  ENDIF.
endform.                    " SAVE
*&---------------------------------------------------------------------*
*&      Form  DELETE
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
*  -->  p1        text
*  <--  p2        text
*----------------------------------------------------------------------*
form DELETE .
  DELETE Z681797_USER FROM Z681797_USER.
  IF SY-subrc = 0.
    MESSAGE 'DELETED' TYPE 'S'.

  ENDIF.
endform.                    " DELETE
*&---------------------------------------------------------------------*
*&      Form  NON_EDITABLE
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
*  -->  p1        text
*  <--  p2        text
*----------------------------------------------------------------------*
form NON_EDITABLE .
  DESCRIBE TABLE gt_user LINES lin.
  tc-lines = lin.
endform.                    " NON_EDITABLE
*&---------------------------------------------------------------------*
*&      Form  CLEAR
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
*  -->  p1        text
*  <--  p2        text
*----------------------------------------------------------------------*
form CLEAR .
  clear gt_user.
endform.                    " CLEAR
*&---------------------------------------------------------------------*
*&      Form  ADD
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
*  -->  p1        text
*  <--  p2        text
*----------------------------------------------------------------------*
form ADD .
  IF ok_code = 'FC_ADD'.
    APPEND INITIAL LINE TO gt_user.
  ENDIF.
endform.                    " ADD
*&---------------------------------------------------------------------*
*&      Form  MODIFY
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
*  -->  p1        text
*  <--  p2        text
*----------------------------------------------------------------------*
form MODIFY .
  modify gt_user FROM z681797_user INDEX tc-current_line.

endform.                    " MODIFY
*&---------------------------------------------------------------------*
*&      Form  FETCH_DATA_DETAILS
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
*  -->  p1        text
*  <--  p2        text
*----------------------------------------------------------------------*
form FETCH_DATA_DETAILS .
  IF gt_details is INITIAL.
    SELECT * FROM ymb_user_details INTO CORRESPONDING FIELDS OF
      TABLE gt_details.

  ENDIF.
endform.                    " FETCH_DATA_DETAILS
*&---------------------------------------------------------------------*
*&      Form  NON_EDITABLE_DETAILS
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
*  -->  p1        text
*  <--  p2        text
*----------------------------------------------------------------------*
form NON_EDITABLE_DETAILS .
  DESCRIBE TABLE gt_details LINES lin.
  tc2-lines = lin.
endform.                    " NON_EDITABLE_DETAILS
*&---------------------------------------------------------------------*
*&      Form  SELECT_DESELECT
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
*  -->  p1        text
*  <--  p2        text
*----------------------------------------------------------------------*
form SELECT_DESELECT .
  LOOP AT gt_details INTO gw_details.
    IF ok_code = 'FC_SA'.
      GW_DETAILS-MARK = 'X'.
    ELSEIF ok_code = 'FC_DA'.
      GW_DETAILS-MARK = ' '.
    ENDIF.
    MODIFY GT_DETAILS FROM GW_DETAILS.
  ENDLOOP.
endform.                    " SELECT_DESELECT
